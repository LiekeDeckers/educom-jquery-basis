<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="css/style.css"/>
        <script src="js/jquery.js"></script>

        <script>
            $(document).ready(function() {

                $(".star").click( function() {
                    const value = $(this).attr("data-value")

                    /// Clear all the red stars
                    $('.star').removeClass('red')

                    /// Paint the stars red
                    $('.star').each( (index, elem) => {
                        const itemValue = $(elem).attr('data-value')
                        if(itemValue <= value) {
                            $(elem).addClass('red')
                        }
                    })

                    $.ajax({
                        url: "https://api.dev-master.ninja/js/rating",
                        method: "POST",
                        data: { rating: value },
                        success: function(result) { 
                            // Update average rating
                            let ratings = []
                            ratings.push(value)
                            console.log(ratings)

                            let sum = 0
                            ratings.map(e => sum += e)
                            console.log(sum)

                            let average = (sum / ratings.length)
                            console.log(average)

                        }
                })
            })

           
    })
        </script>
    </head>

    <body>

        <span class="star" data-value="1">*</span>
        <span class="star" data-value="2">*</span>
        <span class="star" data-value="3">*</span>
        <span class="star" data-value="4">*</span>
        <span class="star" data-value="5">*</span>

    </body>

</html>